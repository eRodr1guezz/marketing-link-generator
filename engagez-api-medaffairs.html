<div id="metaDataWrapper" style="display: none">
  <div id="attendeeFname">*/fname/*</div>
  <div id="attendeeLname">*/lname/*</div>
  <div id="attendeeEmail">*/email/*</div>
  <div id="virtualEventURL">*/VirtualEventURL/*</div>
  <div id="virtualEventID">*/VirtualEventID/*</div>
  <div id="virtualEventKey">*/VirtualEventKey/*</div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const first_name = document.getElementById("attendeeFname").textContent;
    const last_name = document.getElementById("attendeeLname").textContent;
    const email = document.getElementById("attendeeEmail").textContent;

    const attendee = {
      first_name,
      last_name,
      email,
    };

    createAttendee(attendee)

    function createAttendee(attendee) {
      const event_url = document.getElementById("virtualEventURL").textContent;
      const source = document.getElementById("virtualEventKey").textContent;
      const event_id = document.getElementById("virtualEventID").textContent;

      const api_url = encodeURI(`${event_url}/remote/regform/${event_id}?source=${source}`);

      fetch(api_url, {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
        body: new URLSearchParams(attendee),
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data)
          return data
        })
        .catch((err) => console.log(`error from catch handler: ${err}`));
    }
  });
</script>
<!-- Look & Feel -> Custom Code -> Custom HTML <HEAD> code -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const optionList = document.getElementsByClassName("category-selection-tr");
    const inputs = document.querySelectorAll('input')

    for (let option of optionList) {
      for (let td of option.childNodes) {
        for (let input of td.childNodes) {
          input.addEventListener("click", (e) => {
            sessionStorage.setItem(
              document.title.includes('Select Category') ? "subcategory" : "attendee_type",
              e.target.labels[0].innerText.split("$")[0].trim()
            );
          });
        }
      }
    }
  });
</script>